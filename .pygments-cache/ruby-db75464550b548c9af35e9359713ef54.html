<div class="highlight"><pre><span class="c1"># 按照key为period进行排序，默认DESC，前0-limit个元素</span>
<span class="k">def</span> <span class="nf">top_clients</span><span class="p">(</span><span class="n">period</span> <span class="o">=</span> <span class="err">“</span><span class="n">total</span><span class="err">”</span><span class="p">,</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span>
<span class="vg">$redis</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="err">“</span><span class="n">clients</span><span class="err">”</span><span class="p">,</span> <span class="ss">:by</span> <span class="o">=&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="err">“</span><span class="n">stats</span><span class="o">/</span><span class="ss">client</span><span class="p">:</span><span class="o">&lt;</span><span class="n">em</span><span class="o">&gt;-&amp;</span><span class="n">gt</span><span class="p">;</span><span class="c1">#{period}”, :order =&amp;gt; “DESC”,:get =&amp;gt; [”#”, “stats/client:&lt;/em&gt;-&amp;gt;#{period}”], :limit =&amp;gt; [0, limit])</span>
<span class="k">end</span><span class="o">&lt;</span><span class="sr">/p&gt;</span>

<span class="sr">&lt;p&gt;</span>
</pre></div>