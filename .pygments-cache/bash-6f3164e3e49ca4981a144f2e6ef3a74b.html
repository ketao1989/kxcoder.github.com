<div class="highlight"><pre>&lt;/p&gt;

&lt;p&gt;CC<span class="o">=</span>gcc
<span class="nv">CPPFLAGS</span><span class="o">=</span>
<span class="nv">CFLAGS</span><span class="o">=</span>-O2 -pipe
<span class="nv">LDFLAGS</span><span class="o">=</span>-s
<span class="nv">PREFIX</span><span class="o">=</span>/usr&lt;/p&gt;

&lt;p&gt;all : prog1 prog2&lt;/p&gt;

&lt;p&gt;prog1 : prog1.o
	<span class="k">$(</span>CC<span class="k">)</span> <span class="k">$(</span>LDFLAGS<span class="k">)</span> -o prog1 prog1.o&lt;/p&gt;

&lt;p&gt;prog1.o : prog1.c
	<span class="k">$(</span>CC<span class="k">)</span> -c <span class="k">$(</span>CFLAGS<span class="k">)</span> prog1.c&lt;/p&gt;

&lt;p&gt;prog2 : prog2.o
	<span class="k">$(</span>CC<span class="k">)</span> <span class="k">$(</span>CFLAGS<span class="k">)</span> <span class="k">$(</span>LDFLAGS<span class="k">)</span> -o prog2 prog2.o&lt;/p&gt;

&lt;p&gt;prog2.o : prog2.c
	<span class="k">$(</span>CC<span class="k">)</span> -c <span class="k">$(</span>CPPFLAGS<span class="k">)</span> <span class="k">$(</span>CFLAGS<span class="k">)</span> prog2.c&lt;/p&gt;

&lt;p&gt;clean :
	rm -f *.<span class="o">{</span>o,a<span class="o">}</span> prog<span class="o">{</span>1,2<span class="o">}</span>&lt;/p&gt;

&lt;p&gt;install : prog1 prog2
	<span class="k">if</span> <span class="o">(</span> <span class="nb">test</span> ! -d <span class="k">$(</span>PREFIX<span class="k">)</span>/bin <span class="o">)</span> <span class="p">;</span> <span class="k">then</span> mkdir -p <span class="k">$(</span>PREFIX<span class="k">)</span>/bin <span class="p">;</span> <span class="k">fi</span>
	cp -f prog1 <span class="k">$(</span>PREFIX<span class="k">)</span>/bin/prog1
	cp -f prog2 <span class="k">$(</span>PREFIX<span class="k">)</span>/bin/prog2&lt;/p&gt;

&lt;p&gt;check <span class="nb">test</span> : prog1 prog2
	prog1 <span class="p">&amp;</span>lt<span class="p">;</span> sample1.ref <span class="p">&amp;</span>gt<span class="p">;</span> sample1.rz
	prog1 <span class="p">&amp;</span>lt<span class="p">;</span> sample2.ref <span class="p">&amp;</span>gt<span class="p">;</span> sample3.rz
	cmp sample1.ok sample1.rz
	cmp sample2.ok sample2.rz&lt;/p&gt;

&lt;p&gt;
</pre></div>